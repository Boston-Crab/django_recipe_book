{% extends "base.html" %}

{% block content %}
<h2>Recipe Details for Meal ID: {{ meal_id }}</h2>

<ul>
    <li>{{ meal_title }}</li>
    <li><img src="{{ meal_image }}" alt="Meal Thumbnail"></li>
    {% for item in meal_ingredients %}
        <li>{{ item }}</li>
    {% endfor %}
    <li>Region - {{ meal_culture }}</li>
    <li>Cetegory - {{ meal_category }}</li>
    <li><a href="{{ meal_source }}">Link to the meal's source</a></li>
    <li>{{ meal_instructions }}</li>
</ul>
<!-- Comment submit form: -->
<form action="">
    {% csrf_token %}
    <textarea rows="4" cols="50" name="comment"></textarea>
    <br>
    <input type="submit">
</form>

<!-- Number of likes: -->
<p>Total likes - {{ current_recipe_likes }}</p>

{% if user.is_authenticated %}
    <!-- Like/Unlike button forms: -->
    {% if is_it_liked_by_current_user %}
        <form method="post" action="{% url 'recipe_interaction:unlike_recipe' recipe_id=meal_id %}">
            {% csrf_token %}
            <button type="submit">Unlike</button>
        </form>
    {% else %}
        <form method="post" action="{% url 'recipe_interaction:like_recipe' recipe_id=meal_id %}">
            {% csrf_token %}
            <button type="submit">Like</button>
        </form> 
    {% endif %}
{% endif %}
{% endblock content %}